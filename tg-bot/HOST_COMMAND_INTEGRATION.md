# Интеграция выполнения команд на хосте

## Реализовано

### Вариант 1: Префикс для команд хоста (РЕАЛИЗОВАНО)

Добавлена поддержка специальных префиксов для выполнения команд на хосте:
- `!host <команда>` - выполнить команду на хосте
- `#host <команда>` - альтернативный синтаксис
- `!exec <команда>` - альтернативный синтаксис
- `#exec <команда>` - альтернативный синтаксис

**Примеры использования:**
```
!host ping -c 4 8.8.8.8
#host traceroute google.com
!exec df -h
#host netstat -tuln
```

### Как это работает

1. Пользователь отправляет запрос с префиксом `!host` или `#host`
2. Бот перехватывает запрос до отправки в Claude CLI
3. Команда выполняется на хосте через Docker API с `--network host`
4. Результат возвращается пользователю

### Безопасность

- **Whitelist команд**: Разрешены только безопасные команды из списка `ALLOWED_HOST_COMMANDS`
- **Таймауты**: Максимальное время выполнения - 30 секунд
- **Логирование**: Все команды логируются

### Разрешенные команды

Сетевые:
- `ping`, `traceroute`, `mtr`, `curl`, `wget`, `nc`, `nmap`, `dig`, `host`, `nslookup`

Системные:
- `netstat`, `ss`, `ip`, `df`, `free`, `top`, `htop`, `ps`, `uptime`, `uname`

Файловые:
- `ls`, `cat`, `grep`, `find`, `du`, `stat`

## Альтернативные варианты (не реализованы)

### Вариант 2: Автоматическое определение команд

Можно анализировать ответ Claude CLI и если он пытается выполнить команду, автоматически выполнять её на хосте. Требует более сложной логики.

### Вариант 3: Скрипт-обертка на хосте

Создать скрипт `/home/user/n8n-install/scripts/host-exec.sh` и вызывать его через Docker exec или SSH.

### Вариант 4: Отдельный API сервис

Создать простой HTTP API на хосте для выполнения команд. Требует дополнительного сервиса.

## Использование

В сессии ClaudeCLI просто отправьте команду с префиксом:

```
!host ping -c 4 8.8.8.8
```

Бот выполнит команду на хосте и вернет результат.
